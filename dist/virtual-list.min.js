var VirtualList=function(t){"use strict";var e=function(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r,n){var i=e&&e.prototype instanceof u?e:u,o=Object.create(i.prototype),a=new I(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return S()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function u(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,m=p&&p(p(_([])));m&&m!==e&&r.call(m,i)&&(d=m);var v=f.prototype=u.prototype=Object.create(d);function y(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,f[a]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new g(s(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;b(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function r(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var n=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)}))}};function i(t,e,r){var n,i,o,a,s;function c(){var l=Date.now()-a;l<e&&l>=0?n=setTimeout(c,e-l):(n=null,r||(s=t.apply(o,i),o=i=null))}null==e&&(e=100);var l=function(){o=this,i=arguments,a=Date.now();var l=r&&!n;return n||(n=setTimeout(c,e)),l&&(s=t.apply(o,i),o=i=null),s};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(s=t.apply(o,i),o=i=null,clearTimeout(n),n=null)},l}i.debounce=i;var o=i;function a(t){var e=t&&t.parentNode;return e&&e!==document.body?function(t){var e=/(auto|scroll)/;function r(t,e){getComputedStyle(t,null).getPropertyValue(e)}return e.test(r(t,"overflow"))||e.test(r(t,"overflow-x"))||e.test(r(t,"overflow-y"))}(e)?e:a(e):document.body}var s=0;function c(t,e,r,n,i,o,a,s,c,l){"boolean"!=typeof a&&(c=s,s=a,a=!1);const u="function"==typeof r?r.options:r;let h;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),n&&(u._scopeId=n),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=h):e&&(h=a?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),h)if(u.functional){const t=u.render;u.render=function(e,r){return h.call(r),t(e,r)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,h):[h]}return r}const l={props:{items:{type:Array,default:function(){return[]}},keyField:{type:String,default:"id"},prerender:{type:Number,default:0},itemSize:{type:Number,default:null},buffer:{type:Number,default:10},typeField:{type:String,default:"type"}},data:function(){return{scrollableParent:null,totalHeight:0,ready:!1,pool:[],sizeCache:new Map,views:new Map,unusedViews:new Map,averageItemSize:0,minItemSize:0,anchorItem:{index:0,offset:0},firstAttachedItem:0,lastAttachedItem:0,anchorScrollTop:0}},watch:{items:function(){this.updateVisibleItems(!0)}},created:function(){this.$_scrollDirty=!1,this.$_window_width=null,this.debouncedUpdatePositions=o.debounce(this.updateItemsPosition,100),this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted:function(){this.$_window_width=window.innerWidth,this.init()},beforeDestroy:function(){this.removeEventListeners()},methods:{getFirstScrollableParent:function(){return a(this.$el)},init:function(){var t=this.getFirstScrollableParent();t!==document.body&&(this.scrollableParent=t),this.addEventListeners(),this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0},addEventListeners:function(){this.scrollableParent?this.scrollableParent.addEventListener("scroll",this.onScroll):window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize)},removeEventListeners:function(){this.scrollableParent?this.scrollableParent.removeEventListener("scroll",this.onScroll):window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)},onScroll:function(){var t=this;this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame((function(){t.$_scrollDirty=!1,t.updateVisibleItems(!1,!0).continuous||(clearTimeout(t.$_refreshTimout),t.$_refreshTimout=setTimeout(t.handleScroll,100))})))},onResize:function(){this.$_window_width!==window.innerWidth&&(this.clearSizeCache(),this.ready&&this.updateVisibleItems(!1))},clearSizeCache:function(){this.averageItemSize=null,this.minItemSize=null,this.sizeCache.clear()},calculateAnchoredItem:function(t,e){var r=this.keyField;if(0===e)return t;e+=t.offset;var n=t.index;if(e<0)for(;e<0&&n>0;){var i=r?this.items[n-1][r]:this.items[n-1];e+=this.sizeCache.get(i)||this.averageItemSize,n--}else for(;e>0&&n<this.items.length-1;){var o=r?this.items[n+1][r]:this.items[n+1];e-=this.sizeCache.get(o)||this.averageItemSize,n++}return{index:n,offset:e}},updateVisibleItems:function(t){var r=arguments,i=this;return n(e.mark((function n(){var o,a,s,c,l,u,h,f,d,p,m,v,y,g,w,x,b,I,_,S,E,z,L,k,A,C,P;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.length>1&&void 0!==r[1]&&r[1],a=i.items,s=a.length,c=i.itemSize,l=i.minItemSize,u=i.averageItemSize,h=i.buffer,f=i.views,d=i.unusedViews,p=i.keyField,m=i.typeField,v=i.pool,y=i.firstAttachedItem,g=i.lastAttachedItem,s){e.next=21;break}return i.firstAttachedItem=0,i.lastAttachedItem=0,i.totalHeight=0,e.abrupt("return");case 21:if(!i.$_prerender){e.next=28;break}return i.firstAttachedItem=0,i.lastAttachedItem=i.prerender,i.totalHeight=null,e.abrupt("return");case 28:if(c||l&&u){e.next=32;break}i.lastAttachedItem=i.firstAttachedItem+20,e.next=44;break;case 32:if(w=i.getScroll(),x=w.start-i.anchorScrollTop,!o){e.next=39;break}if((b=x)<0&&(b=-b),!(null===c&&b<l||b<c)){e.next=39;break}return e.abrupt("return",{continuous:!0});case 39:0===w.start?i.anchorItem={index:0,offset:0}:i.anchorItem=i.calculateAnchoredItem(i.anchorItem,x),i.anchorScrollTop=w.start,I=i.calculateAnchoredItem(i.anchorItem,w.end),i.firstAttachedItem=Math.max(0,i.anchorItem.index-h),i.lastAttachedItem=Math.min(i.items.length,I.index+h);case 44:_=i.firstAttachedItem<=g&&i.lastAttachedItem>=y,i.continuous!==_?(_&&(f.clear(),d.clear(),i.pool.forEach((function(t){i.unuseView(t)}))),i.continuous=_):_&&i.pool.forEach((function(e){e.nr.used&&(t&&(e.nr.index=a.findIndex((function(t){return i.keyField?t[p]===e.item[p]:t===e.item}))),(-1===e.nr.index||e.nr.index<i.firstAttachedItem||e.nr.index>=i.lastAttachedItem)&&i.unuseView(e))})),S=_?null:new Map,C=i.firstAttachedItem;case 48:if(!(C<i.lastAttachedItem)){e.next=58;break}if(E=a[C],null!=(P=p?E[p]:E)){e.next=53;break}throw new Error("Key is ".concat(P," on item (keyField is '").concat(p,"')"));case 53:(A=f.get(P))?(A.nr.used=!0,A.item=E):(z=E[m],L=d.get(z),_?L&&L.length?((A=L.pop()).item=E,A.nr.used=!0,A.nr.index=C,A.nr.key=P,A.nr.type=z):A=i.addView(v,C,E,P,z):(k=S.get(z)||0,(!L||k>=L.length)&&(A=i.addView(v,C,E,P,z),i.unuseView(A,!0),L=d.get(z)),(A=L[k]).item=E,A.nr.used=!0,A.nr.index=C,A.nr.key=P,A.nr.type=z,S.set(z,k+1),k++),f.set(P,A));case 55:C++,e.next=48;break;case 58:return e.next=60,i.$nextTick();case 60:i.measureItems(),i.totalHeight=i.calculateTotalHeight(),i.fixScrollPosition(),i.debouncedUpdatePositions();case 64:case"end":return e.stop()}}),n)})))()},getScroll:function(){var t,e=this.$el;if(this.scrollableParent)t={start:this.scrollableParent.scrollTop,end:this.scrollableParent.scrollTop+this.scrollableParent.clientHeight};else{var r=e.getBoundingClientRect(),n=r.height,i=-r.top,o=window.innerHeight;i<0&&(o+=i,i=0),i+o>n&&(o=n-i),t={start:i,end:i+o}}return t},calculateTotalHeight:function(){if(this.itemSize)return this.itemSize*this.items.length;var t=0,e=this.sizeCache.size,r=this.items.length-e;return t+=r*this.averageItemSize,this.sizeCache.forEach((function(e){t+=e})),t},unuseView:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.unusedViews,n=t.nr.type,i=r.get(n);i||(i=[],r.set(n,i)),i.push(t),e||(t.nr.used=!1,t.position=-9999,this.views.delete(t.nr.key))},addView:function(t,e,r,n,i){var o={item:r,position:0},a={id:s++,index:e,used:!0,key:n,type:i};return Object.defineProperty(o,"nr",{configurable:!1,value:a}),t.push(o),o},measureItems:function(){var t=this,e=this.$refs.listviewItem,r=!1;if(e.forEach((function(e,n){var i=t.pool[n];if(i.nr.used){var o=e.offsetHeight,a=i.nr.key;t.sizeCache.has(a)&&t.sizeCache.get(a)===o||(r=!0,t.sizeCache.set(a,o))}})),r){var n=this.sizeCache.size,i=null,o=0;this.sizeCache.forEach((function(t){i=null===i?t:Math.min(t,i),o+=t}));var a=o/n;this.minItemSize=i,this.averageItemSize=a}},fixScrollPosition:function(){for(var t=0,e=0;e<this.anchorItem.index;e++){var r=this.keyField,n=r?this.items[e][r]:this.items[e];t+=this.sizeCache.get(n)||this.averageItemSize||0}t+=this.anchorItem.offset,this.anchorScrollTop=t},updateItemsPosition:function(){for(var t=this.keyField,e=this.anchorScrollTop-this.anchorItem.offset,r=this.anchorItem.index;r>this.firstAttachedItem;){var n=t?this.items[r-1][t]:this.items[r-1];e-=this.sizeCache.get(n)||this.averageItemSize||0,r--}for(;r<this.firstAttachedItem;){var i=t?this.items[r][t]:this.items[r];e+=this.sizeCache.get(i)||this.averageItemSize||0,r++}for(var o=this.firstAttachedItem;o<this.lastAttachedItem;o++){var a=t?this.items[o][t]:this.items[o];this.views.get(a).position=e,e+=this.sizeCache.get(a)||this.averageItemSize||0}}}};var u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"listview",class:{ready:t.ready},style:{height:t.totalHeight+"px"}},t._l(t.pool,(function(e){return r("div",{key:e.nr.id,ref:"listviewItem",refInFor:!0,staticClass:"listview__item",style:t.ready?{transform:"translateY("+e.position+"px)"}:null},[t._t("default",null,{item:e.item,index:e.nr.index,active:e.nr.used})],2)})),0)};u._withStripped=!0;const h=c({render:u,staticRenderFns:[]},void 0,l,"data-v-a8581048",!1,void 0,!1,void 0,void 0,void 0);function f(t){f.installed||(f.installed=!0,t.component("ListView",h))}var d={install:f},p=null;return"undefined"!=typeof window?p=window.Vue:"undefined"!=typeof global&&(p=global.Vue),p&&p.use(d),t.default=h,t.install=f,t}({});
//# sourceMappingURL=virtual-list.min.js.map
